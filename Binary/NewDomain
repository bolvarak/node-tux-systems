#!/usr/bin/env node

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'use strict'; /// Strict Syntax //////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
require('../Prototype/Array'); /// Array Prototypes //////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
require('../Prototype/String'); /// String Prototypes ////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const $db = require('../Common/Database'); /// Database Connection ///////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Main Event Loop //////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Create the domain
$db.model('dnsDomain').create({
	'userId': process.argv[3],
	'name': process.argv[2],
	'nameServer': [
		'ns1.tux.systems',
		'ns2.tux.systems'
	]
}).then(($domain) => {
	// Log the domain
	console.log('Domain', $domain.get({'plain': true}));
	// We're done, kill the process
	process.exit(0);
}).catch(($error) => {
	// Log the error
	console.error($error);
	// We're done, kill the process
	process.exit(1);
});

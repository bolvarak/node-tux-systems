///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'use strict'; /// Strict Syntax //////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
module.exports = ($sequelize, $type) => { /// Social Media Profile Lookup Fluent Model Module Definition /////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	// Define our new model
	const $socialMediaProfileModel = $sequelize.define('socialMediaProfile', {
		'id': {
			'allowNull': false,
			'defaultValue': $type.UUIDV4,
			'field': 'id',
			'primaryKey': true,
			'type': $type.UUID
		},
		'isActive': {
			'allowNull': true,
			'defaultValue': true,
			'field': 'is_active',
			'type': $type.BOOLEAN,
		},
		'token': {
			'allowNull': true,
			'field': 'token',
			'type': $type.TEXT,
			'validate': {
				'isAlphanumeric': true
			}
		},
		'type': {
			'allowNull': false,
			'field': 'type',
			'type': $type.ENUM(
				'facebook',
				'linkedin',
				'googleplus',
				'github',
				'gitlab'
			)
		},
		'url': {
			'allowNull': true,
			'field': 'url',
			'type': $type.TEXT,
			'validate': {
				'isUrl': true
			}
		},
		'userId': {
			'allowNull': false,
			'field': 'user_id',
			'type': $type.UUID
		}
	}, {
		'indexes': [
			{'fields': ['is_active']},
			{'fields': ['type']},
			{'fields': ['user_id']}
		],
		'tableName': 'social_media_profile'
	});

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// Association Builder //////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	/**
	 * This method provides the associations for this model
	 * @name Sequelize.Model.socialMediaProfile
	 * @param {Object.<string, Sequelize.Model>} $models
	 * @returns {void}
	 */
	$socialMediaProfileModel.associate = ($models) => {
		// Associate the user
		$models.socialMediaProfile.belongsTo($models.user, {
			'onDelete': 'CASCADE',
			'foreignKey': {
				'allowNull': true
			}
		});
	};

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	return $socialMediaProfileModel; /// Social Media Profile Lookup Fluen Model Definition ///////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
}; /// End Social Media Profile Lookup Fluent Model Module Definition ////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'use strict'; /// Strict Syntax //////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
import * as log4js from 'log4js'; /// Logging Module /////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
export abstract class CommonService { /// CommonService Class Definition /////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// Properties ///////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	/**
	 * This property contains our logger
	 * @name CommonService.mLogger
	 * @property
	 * @protected
	 * @type {log4js.Logger}
	 */
	protected mLogger: log4js.Logger;

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// Constructor //////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	/**
	 * This method instantiates a new abstract service
	 * @name CommonService.constructor()
	 * @param {string} $sysLogId
	 * @param {string, optional} $logLevel ['debug']
	 * @protected
	 */
	protected constructor($sysLogId: string, $logLevel: string = 'debug') {

		///////////////////////////////////////////////////////////////////////////////////////////////////////////////
		/// Logger Configuration /////////////////////////////////////////////////////////////////////////////////////
		/////////////////////////////////////////////////////////////////////////////////////////////////////////////

		// Define our configuration object
		const $loggerConfig: log4js.Configuration = {
			'appenders': {},
			'categories': {
				'default': {
					'appenders': [$sysLogId],
					'level': $logLevel
				}
			}
		};
		// Set our appender into the configuration object
		$loggerConfig.appenders[$sysLogId] = {
			'layout': {
				'type': 'colored'
			},
			'type': 'stdout'
		};
		// Configure the logger
		log4js.configure($loggerConfig);
		// Set the logger into the instance
		this.mLogger = log4js.getLogger();

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	} /// End Constructor ////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// Abstract Methods /////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	/**
	 * This method should start the service
	 * @abstract
	 * @async
	 * @name CommonService.start()
	 * @public
	 * @returns {Promise<void>}
	 */
	public abstract async start(): Promise<void>;

	/**
	 * This method should stop the service
	 * @abstract
	 * @async
	 * @name CommonService.stop()
	 * @public
	 * @returns {Promise<void>}
	 */
	public abstract async stop(): Promise<void>;

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// Inline Methods ///////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	/**
	 * This method returns our logger from the instance
	 * @name CommonService.logger()
	 * @public
	 * @returns {log4js.Logger}
	 */
	public logger(): log4js.Logger {
		// Return the logger from the instance
		return this.mLogger;
	}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
}; /// End CommonService Class Definition ////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
